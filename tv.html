<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Моє телебачення</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div style="height:50px"></div>

    <div id="cabinet" class="status-active">
        <aside id="sidebar-menu">
            <a href="#" id="user" class="active">
               <div id="user-icon"></div>
               <div id="user-description">
                  <p><strong>duncan</strong> <span>баланс: <span data-block="deposit">150</span></span></p>
                  <p><span id="user-status"></span> <span>до: <span data-block="exp">−</span></span></p>
               </div>
            </a>
            <a href="#friend" id="sticked">
               <span class="aside-icon">
                  <svg viewBox="0 0 16 16">
                     <path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path>
                     <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z"></path>
                  </svg>
               </span>
               <div>
                  Підключи друга <br>
                  отримай знижку 100%
               </div>
            </a>
            <ul>
               <li>
                  <a href="#pay">
                     <p class="aside-icon">
                        <svg viewBox="0 0 16 16">
                           <path d="M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499L12.136.326zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484L5.562 3zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"></path>
                        </svg>
                     </p>
                     <span>Оплатити</span>
                  </a>
               </li>
            </ul>
            <hr>
            <ul>
               <li>
                  <a href="#gid">
                     <p class="aside-icon">
                        <svg viewBox="0 0 16 16">
                           <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"></path>
                        </svg>
                     </p>
                     <span>Мій тариф</span>
                  </a>
               </li>
               <li>
                  <a href="#service">
                     <p class="aside-icon">
                        <svg viewBox="0 0 16 16">
                           <path d="M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12v3h-5v-3h5zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8v7H1V8h5zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6v7h-5V1h5zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z"></path>
                        </svg>
                     </p>
                     <span>Мої послуги</span>
                  </a>
               </li>
               <li>
                  <a href="#history-payment">
                     <p class="aside-icon">
                        <svg viewBox="0 0 16 16">
                           <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"></path>
                           <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"></path>
                           <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"></path>
                        </svg>
                     </p>
                     <span>Історія оплат</span>
                  </a>
               </li>
               <li>
                  <a href="#history-session">
                     <p class="aside-icon">

                        <svg viewBox="0 0 16 16"><path d="M7.4,0C7.6,0,7.8,0,8,0v1C7.8,1,7.7,1,7.5,1C7.5,1,7.4,0,7.4,0z M5.1,0.5c0.4-0.1,0.7-0.3,1.1-0.3l0.2,1 c-0.3,0.1-0.7,0.2-1,0.3C5.5,1.5,5.1,0.5,5.1,0.5z M4.1,2.2C4,2.3,3.8,2.4,3.7,2.5L3.1,1.7c0.3-0.2,0.6-0.5,1-0.7l0.5,0.9 C4.4,2,4.2,2.1,4.1,2.2L4.1,2.2z M1.5,3.4c0.2-0.3,0.5-0.6,0.7-0.9l0.7,0.7C2.7,3.4,2.5,3.7,2.3,4L1.5,3.4z M1.3,5.8L0.4,5.5 c0.1-0.4,0.3-0.7,0.4-1.1l0.9,0.4C1.7,5,1.6,5.2,1.5,5.3C1.5,5.5,1.4,5.6,1.3,5.8z M1,7.8l-1,0C0,7.4,0,7,0.1,6.6l1,0.2 C1,7.1,1,7.5,1,7.8L1,7.8z M1.2,9.9l-1,0.3C0.2,9.8,0.1,9.4,0.1,9l1-0.1c0,0.2,0,0.3,0.1,0.5C1.2,9.5,1.2,9.7,1.2,9.9z M1.2,12.3 c-0.2-0.3-0.4-0.7-0.6-1l0.9-0.4c0.1,0.3,0.3,0.6,0.5,0.9C2.1,11.7,1.2,12.3,1.2,12.3z M2.3,13.7c-0.1-0.1-0.3-0.3-0.4-0.4l0.8-0.7 c0.1,0.1,0.2,0.3,0.4,0.4C3,12.9,2.3,13.7,2.3,13.7z"/><path d="M8,0c2.1,0,4.2,0.8,5.7,2.3c3.1,3.1,3.1,8.2,0,11.3s-8.2,3.1-11.3,0L3,12.9C4.4,14.3,6.1,15,8,15c3.9,0,7-3.1,7-7 s-3.1-7-7-7V0z"/><path d="M7.5,3C7.8,3,8,3.2,8,3.5v5.2l3.2,1.9c0.2,0.1,0.3,0.4,0.2,0.7c-0.1,0.2-0.4,0.3-0.7,0.2l-3.5-2C7.1,9.3,7,9.2,7,9V3.5 C7,3.2,7.2,3,7.5,3z"/></svg>
                     </p>
                     <span>Історія з'єднань</span>
                  </a>
               </li>
               <li>
                  <a href="#messages">
                     <p class="aside-icon">
                        <svg viewBox="0 0 16 16">
                           <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383l-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"></path>
                        </svg>
                     </p>
                     <span>Мої повідомлення</span>
                  </a>
               </li>
               <li>
                  <a href="#offers">
                     <p class="aside-icon">
                        <svg viewBox="0 0 16 16">
                           <path d="M3 2.5a2.5 2.5 0 0 1 5 0 2.5 2.5 0 0 1 5 0v.006c0 .07 0 .27-.038.494H15a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 14.5V7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2.038A2.968 2.968 0 0 1 3 2.506V2.5zm1.068.5H7v-.5a1.5 1.5 0 1 0-3 0c0 .085.002.274.045.43a.522.522 0 0 0 .023.07zM9 3h2.932a.56.56 0 0 0 .023-.07c.043-.156.045-.345.045-.43a1.5 1.5 0 0 0-3 0V3zM1 4v2h6V4H1zm8 0v2h6V4H9zm5 3H9v8h4.5a.5.5 0 0 0 .5-.5V7zm-7 8V7H2v7.5a.5.5 0 0 0 .5.5H7z"></path>
                        </svg>
                     </p>
                     <span>Пропозиції для мене</span>
                  </a>
               </li>
            </ul>
      </aside>

        <main id="cabinet-main">
        <h1>Моє телебачення</h1>
        <div class="block">
            <h2 class="collapse">
                <span>
                    <svg viewBox="0 0 640 512">
                    <path d="M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"></path>
                    </svg>
                    Omega-TV
                </span>
            </h2>
            <div class="description">Сучасне інтерактивне телебачення від Omega-TV</div>
            <div class="hidden-area">
                <ul class="user-data">
                    <li class="change">
                    <p>Підключено</p>
                    <p>
                        <input class="checkbox" id="checkbox" type="checkbox">
                        <label for="checkbox"></label>
                    </p>
                    </li>
                    <li>
                    <p>Тариф телебачення</p>
                    <p>
                        <select id="tv-value" class="disabled-select">
                            <option value="---,---,---">Оберіть тариф</option>
                            <option value="20,3,100">Назва 1 тарифа</option>
                            <option value="40,4,200">Назва 2 тарифа</option>
                            <option value="60,5,300">Назва 3 тарифа</option>
                        </select>
                    </p>
                    </li>
                    <li>
                    <p>Кількість каналів</p>
                    <p><span id="tv-value-1">---</span></p>
                    </li>
                    <li>
                    <p>Кількість пристроїв</p>
                    <p><span id="tv-value-2">---</span></p>
                    </li>
                    <li>
                    <p>Місячна абонплата</p>
                    <p><span id="tv-value-3">0</span> грн/міс</p>
                    </li>
                </ul>
                <div class="user-confirm">
                    <button>Зберегти зміни</button>
                </div>
            </div>
            <!-- .hidden-area -->
        </div>
        <div class="block">
            <h2 class="collapse">
                <span>
                    <svg fill="currentColor" viewBox="0 0 16 16">
                    <path d="M7.5 1v7h1V1h-1z"/>
                    <path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"/>
                    </svg>
                    Мої пристрої
                </span>
            </h2>
            <!--                 
            <div id="tv-devices" class="hidden-area">
                <ul class="user-data">
                </ul>
                
                <ol class="user-data">
                    <li id="add-device">
                        <p>Пристрій не активовано <button>Активувати пристрій</button></p>
                    </li>
                
                    <li class="insert">
                        <p>Пристрій <strong>012345</strong> <button>delete</button></p>
                    </li>
                    
                    <li class="insert">
                        <p>Плейлист <strong>987654</strong> <button>delete</button></p>
                    </li>
                </ol>
            </div>
        -->


            <div id="tv-devices" class="hidden-area">
                <ol class="user-data">

                    <li class="insert">
                        <p>
                            <span class="insert-text">
                                <b>X96-W</b>
                                <span class="insert-latest">
                                    останнє використання: <b>11.05.2021</b>                                
                                </span>
                            </span>

                            <button class="delete-tv" data-act="del-code" data-uniq="AD705AA7990CEB52">delete</button>
                        </p>
                    </li>

                    <li class="insert">
                        <p>
                            <span class="insert-text">
                                <b>X96mini</b>
                                <span class="insert-latest">
                                    останнє використання: <b>09.06.2021</b>
                                </span>
                            </span>

                            <button class="delete-tv" data-act="del-code" data-uniq="75FA3F13BB4F2C25">delete</button>
                        </p>
                    </li>

                    <li class="insert">
                        <p>
                            <span class="insert-text">
                                <a href="https://cdnua03.hls.tv/h/0D1058982575156F/hls.m3u" download="true">Завантажити плейлист</a>
                                <span class="insert-latest">
                                    останнє використання: <b>27.04.2021</b>                                
                                </span>
                            </span>

                            <button class="delete-tv" data-act="del-list" data-uniq="0D1058982575156F">delete</button>
                        </p>
                    </li>

                    <li class="insert">
                        <p>
                            <span class="insert-text">
                                <a href="https://cdnua03.hls.tv/h/0482A77693DA30A6/hls.m3u" download="true">Завантажити плейлист</a> 
                                <span class="insert-latest"></span>
                                </span>                               

                            <button class="delete-tv" data-act="del-list" data-uniq="0482A77693DA30A6">delete</button>
                        </p>
                    </li>

                    <li id="add-device">
                        <p>
                            <span class="insert-text">
                                Пристрій не активовано
                            </span>
                            
                            <button class="add-code" data-add_txt="">Активувати пристрій</button>
                        </p>
                    </li>
                </ol>
            </div>
        </div>
        </main>
    </div>
    <!-- #cabinet -->

    <div style="height:500px"></div>

    <div id="modal" class="approuve">
        <p>Для активації введіть цей код на Вашому пристрої або отримайте плейлист</p>
        <hr>
        <p>Ваш код активації: <strong>3с9в</strong></p>
        <p>або</p>
        <p><button class="loading">Отримати плейлист</button></p>
    </div>

    <div id="approuve" class="approuve">
        <p class="approuve-header">Для збереження, введіть пароль та натисніть "Підтвердити"</p>
        <input type="password" placeholder="Пароль в особистий кабінет">
        <button>Підтвердити</button>
        <p><b>Увага!</b> Вартість негайної зміни тарифу: 30грн</p>
    </div>

    <!-- #approuve -->
    <div id="approuve-delete" class="approuve">
        <p>Для видалення натисніть "Підтвердити"</p>
        <p><button class="active">Підтвердити</button></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script>// 1. кнопка редагування сторінки
        $('.edit').on('click', function () {
            $(this).toggleClass('editable');
        
            $('select').toggleClass('disabled-select');
        
            $('.user-confirm').removeClass('active');
        });
        
        // 2. зміна -- показати кнопку
        $('#internet-value').on('change', function(){
            var data = $('#internet-value').val().split(',');
        
            $('#internet-value-1').text(data[0]);
            $('#internet-value-2').text(data[1]);
            $('#internet-value-3').val(data[2]);
        
            $('.user-confirm').addClass('active');
        });
        
        // 2.1 час зміни тарифу
        $('#internet-time-change').on('change', function(){
            if($('#internet-time-change').val() === '1'){
                $('#internet-time-now').addClass('active');
            } else {
                $('#internet-time-now').removeClass('active');
            }
        
            $('.user-confirm').addClass('active');
        });
    </script>
    <script>
        (function () {
        
            // 1. кнопка редагування сторінки
            $('.collapse').on('click', function () {
                $(this).toggleClass('collapsed');
        
                $(this).siblings('.hidden-area').fadeToggle(100);
            });
        
            // 2. якщо були зміни у полях -- кнопка стає активною
            $('#checkbox').on('click', function () {
        
                if (parseInt($(this).data('on')) !== ($(this).is(':checked') ? 1 : 0))
                    $('[name="act"]').val($(this).is(':checked') ? 'on' : 'off');
                else $('[name="act"]').val($('[name="act"]').data('saved'));
        
                if ($('[name="act"]').val() === 'on' || $('[name="act"]').val() === 'off')
                    $('.user-confirm').addClass('active');
                else $('.user-confirm').removeClass('active');
        
                // перевірка чи активна послуга (для активації полів)
                if($(this).prop('checked')){
                    $(this).parents('.user-data').find('select').removeClass('disabled-select');
                } else {
                    $(this).parents('.user-data').find('select').addClass('disabled-select');
                }
            });
        
            function updateValues() {
        
                if ($('#tv-value').length === 0)
                    return;
        
                const data = $('#tv-value').val().split(',');
        
                $('#tv-value-1').text(data[0]);
                $('#tv-value-2').text(data[1]);
                $('#tv-value-3').text(data[2]);
                $('#tv-value-4').val(data[3]);
        
                if ($('[name="act"]').val() === 'edit')
                {
                    if (parseInt($('#tv-value-4').val()) !== parseInt($('#tv-value-4').data('saved')))
                        $('.user-confirm').addClass('active');
                    else $('.user-confirm').removeClass('active');
                }
        
            }
        
            updateValues();
        
            // 3.2 описи тарифів
            $('#tv-value').on('change', function(){
        
                updateValues();
        
            });
        
            // 6. показати блок пристроїв після збереження тарифу
            $('#approuve button').on('click', function(){
                $('#tv-devices').addClass('active');
        
                // деактивую кнопку "зберегти зміни"
                $('.user-confirm').removeClass('active');
            });
        
        
        })();
        
        {
            document.querySelectorAll('.delete-tv').forEach(b => b.addEventListener('click', () => {
        
                const modal = new Modal();
        
                const p = document.createElement('p');
                p.innerText = 'Для видалення натисніть "Підтвердити"';
                modal.modal.appendChild(p);
        
                const btn = document.createElement('button');
                btn.classList.add('active');
                btn.innerText = 'Підтвердити';
                modal.modal.appendChild(btn);
        
                btn.addEventListener('click', () => {
        
                    My.loadJSON('https://my.wenet.lviv.ua/v3/write/tv.php',
                            data => {
                                My.processJSON(data);
                                Modal.closeAll();
                            },
                        {
                            method: 'POST',
                            cache: 'no-cache',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded',
                            },
                            body: 'act=' + b.dataset.act + '&uniq=' + b.dataset.uniq
                        });
        
                });
        
            }));
        
            const addDevice = () => {
        
                My.loadJSON('https://my.wenet.lviv.ua/v3/write/tv.php?act=get-code', data => {
        
                    if (data.code === null)
                    {
                        Modal.info('Помилка отримання коду');
                        return;
                    }
        
                    const modal = new Modal();
        
                    modal.modal.innerHTML = '<p>Для активації введіть цей код на Вашому пристрої або отримайте плейлист</p>\n' +
                        '        <hr /><p>Ваш код активації: <strong>' + data.code + '</strong></p><p>або</p>';
        
                    const p = document.createElement('p');
        
                    const btn = document.createElement('button')
                    btn.innerText = 'Отримати плейлист';
                    p.appendChild(btn);
        
                    modal.modal.appendChild(p);
        
                    modal.modal.id = 'modal';
        
                    btn.addEventListener('click', () => {
        
                        btn.classList.add('loading');
                        btn.disabled = true;
        
                        My.loadJSON('https://my.wenet.lviv.ua/v3/write/tv.php?act=get-list', data => {
        
                            if (data.url === null)
                            {
                                Modal.info('Помилка отримання плейлиста');
                                return;
                            }
        
                            const link = document.createElement("a");
                            link.setAttribute("href", data.url);
                            link.setAttribute("download", data.url);
                            link.click();
        
                            Modal.closeAll();
                            upd();
                        })
        
                    })
        
        
                });
            };
        
            document.querySelectorAll('.add-code').forEach(b => b.addEventListener('click', () => {
        
                if (b.dataset.add_txt.length > 0)
                    Modal.passwordConfirm(addDevice, b.dataset.add_txt)
                else addDevice();
        
            }));
        }
    </script>
</body>
</html>